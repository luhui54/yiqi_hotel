import{G as x,U as I}from"./user-14ed03fd.js";import{u as B}from"./user-194456a1.js";import{U as S}from"./UploadImg-bd809d4c.js";import{_ as k,C as m,r as f,E as C,f as t,g as D,a as G,w as r,d as c,O as N,o as v,e as o,h as E,A as q,B as M,K as O}from"./index-98ff7959.js";const p=d=>(q("data-v-94f54838"),d=d(),M(),d),P={class:"profile-container"},R=p(()=>t("div",{class:"page-header"},[t("h2",{class:"page-title"},"个人信息"),t("p",{class:"page-desc"},"您可以在这里修改您的个人资料")],-1)),j={class:"profile-card"},A={class:"avatar-section"},H=p(()=>t("div",{class:"avatar-label"},"头像",-1)),J={class:"avatar-upload"},K=p(()=>t("div",{class:"avatar-tip"},"支持JPG、PNG格式，文件小于2MB",-1)),T={class:"form-section"},z={__name:"profile",setup(d){const g=B(),e=m({}),h=m({avatar:[{required:!0,message:"请上传头像",trigger:"blur"}],username:[{required:!0,message:"请输入用户名",trigger:"blur"}]}),s=f(!1),_=f(),b=()=>{_.value.validate(async l=>{if(l){s.value=!0;try{const a=await I(e);O.success("个人信息更新成功"),g.updateUserInfo(a.data)}catch(a){console.error(a)}finally{s.value=!1}}})};(()=>{s.value=!0,x().then(l=>{Object.assign(e,l.data),s.value=!1}).catch(l=>{s.value=!1})})();const U=l=>{e.avatar=l};return(l,a)=>{const n=c("el-form-item"),u=c("el-input"),V=c("el-button"),y=c("el-form"),w=N("loading");return v(),C("div",P,[R,t("div",j,[D((v(),G(y,{ref_key:"formRef",ref:_,model:e,rules:h,"label-position":"top",class:"profile-form"},{default:r(()=>[t("div",A,[H,t("div",J,[o(n,{prop:"avatar"},{default:r(()=>[o(S,{images:e.avatar,limit:1,onHandleUpload:U,class:"avatar-uploader"},null,8,["images"])]),_:1}),K])]),t("div",T,[o(n,{label:"用户名",prop:"username"},{default:r(()=>[o(u,{modelValue:e.username,"onUpdate:modelValue":a[0]||(a[0]=i=>e.username=i),placeholder:"请输入您的用户名"},null,8,["modelValue"])]),_:1}),o(n,{label:"手机号码",prop:"phone"},{default:r(()=>[o(u,{modelValue:e.phone,"onUpdate:modelValue":a[1]||(a[1]=i=>e.phone=i),placeholder:"请输入您的手机号码"},null,8,["modelValue"])]),_:1}),o(n,{label:"个人签名",prop:"signature"},{default:r(()=>[o(u,{modelValue:e.signature,"onUpdate:modelValue":a[2]||(a[2]=i=>e.signature=i),type:"textarea",rows:3,placeholder:"写一段个性签名，展示自己的独特魅力",maxlength:"100","show-word-limit":""},null,8,["modelValue"])]),_:1}),o(n,null,{default:r(()=>[o(V,{type:"primary",onClick:b,loading:s.value,class:"submit-btn"},{default:r(()=>[E(" 保存修改 ")]),_:1},8,["loading"])]),_:1})])]),_:1},8,["model","rules"])),[[w,s.value]])])])}}},Y=k(z,[["__scopeId","data-v-94f54838"]]);export{Y as default};
