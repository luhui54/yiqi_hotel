import{I as G,S as L,G as M,D as P}from"./room-d7507ce9.js";import{r as g,C as $,d as n,o as p,a as w,w as t,e,E as z,M as j,N as A,h as d,K as E,_ as K,O,i as f,P as Q,Q as J,f as I,R as W,S as R,g as X,l as U,T as Y,L as Z,A as ee,B as te}from"./index-98ff7959.js";import{a as le}from"./roomType-ad4bec6d.js";const ae={__name:"edit",emits:["handleClose"],setup(h,{expose:o,emit:_}){const m=g(!1),C=g([]),s=g({});o({init:a=>{m.value=!0,le().then(l=>{C.value=l.data}),a?G(a).then(l=>{s.value=l.data}):s.value={}}});const B=$({roomTypeId:[{required:!0,message:"此项是必填项",trigger:"blur"}],sn:[{required:!0,message:"此项是必填项",trigger:"blur"}],status:[{required:!0,message:"此项是必填项",trigger:"blur"}]}),k=_,v=a=>{m.value=!1,k("handleClose",a)},b=g(),D=()=>{b.value.validate((a,l)=>{a&&L(s.value).then(y=>{E.success("操作成功"),v(!0)})})};return(a,l)=>{const y=n("el-option"),V=n("el-select"),i=n("el-form-item"),F=n("el-input"),u=n("el-radio"),x=n("el-radio-group"),T=n("el-button"),N=n("el-form"),H=n("el-drawer");return p(),w(H,{modelValue:m.value,"onUpdate:modelValue":l[3]||(l[3]=r=>m.value=r),title:"新增或编辑"},{default:t(()=>[e(N,{ref_key:"formRef",ref:b,style:{"max-width":"600px"},model:s.value,rules:B,"label-width":"auto"},{default:t(()=>[e(i,{label:"所属房型",prop:"roomTypeId"},{default:t(()=>[e(V,{modelValue:s.value.roomTypeId,"onUpdate:modelValue":l[0]||(l[0]=r=>s.value.roomTypeId=r),placeholder:"请选择所属房型"},{default:t(()=>[(p(!0),z(j,null,A(C.value,r=>(p(),w(y,{key:r.id,label:r.name,value:r.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(i,{label:"房间号",prop:"sn"},{default:t(()=>[e(F,{modelValue:s.value.sn,"onUpdate:modelValue":l[1]||(l[1]=r=>s.value.sn=r)},null,8,["modelValue"])]),_:1}),e(i,{label:"房间状态",prop:"status"},{default:t(()=>[e(x,{modelValue:s.value.status,"onUpdate:modelValue":l[2]||(l[2]=r=>s.value.status=r)},{default:t(()=>[e(u,{value:0},{default:t(()=>[d("空闲")]),_:1}),e(u,{value:1},{default:t(()=>[d("入住")]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(i,null,{default:t(()=>[e(T,{type:"primary",onClick:D},{default:t(()=>[d("提交")]),_:1}),e(T,{onClick:v},{default:t(()=>[d("关闭")]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"])}}};const oe=h=>(ee("data-v-db112d33"),h=h(),te(),h),ne={class:"room-container"},se=oe(()=>I("div",{class:"card-header"},[I("h3",null,"房间管理")],-1)),re={class:"table-operations"},de={class:"pagination-container"},ie={__name:"index",setup(h){const o=$({searchForm:{},pageData:[],page:{current:1,size:10},total:0,loading:!1}),_=()=>{o.loading=!0,M({...o.page,...o.searchForm}).then(a=>{o.pageData=a.data.records,o.total=a.data.total}).finally(()=>{o.loading=!1})};_();const m=a=>{o.page.current=a,_()},C=()=>{o.searchForm={},_()},s=g(),S=a=>{s.value.init(a)},B=a=>{a&&_()},k=g(!0);let v=[];const b=a=>{const l=[];a?l.push(a):l.push(...v),Z.confirm("确认删除该记录吗？","警告",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then(()=>{P(l).then(y=>{E.success("删除成功"),_()})})},D=a=>{k.value=a.length===0,v=a.map(l=>l.id)};return(a,l)=>{const y=n("el-input"),V=n("el-form-item"),i=n("el-button"),F=n("el-form"),u=n("el-table-column"),x=n("el-tag"),T=n("el-table"),N=n("el-pagination"),H=n("el-card"),r=O("loading");return p(),z("div",ne,[e(H,{shadow:"hover",class:"search-card"},{default:t(()=>[se,e(F,{model:o.searchForm,"label-width":"auto",inline:!0,class:"search-form"},{default:t(()=>[e(V,{label:"酒店名称"},{default:t(()=>[e(y,{modelValue:o.searchForm.hotelTitle,"onUpdate:modelValue":l[0]||(l[0]=c=>o.searchForm.hotelTitle=c),placeholder:"请输入酒店名称",clearable:""},null,8,["modelValue"])]),_:1}),e(V,{class:"search-buttons"},{default:t(()=>[e(i,{type:"primary",onClick:_,icon:f(Q),loading:o.loading},{default:t(()=>[d(" 搜索 ")]),_:1},8,["icon","loading"]),e(i,{onClick:C,icon:f(J)},{default:t(()=>[d("重置")]),_:1},8,["icon"])]),_:1})]),_:1},8,["model"]),I("div",re,[e(i,{type:"primary",onClick:l[1]||(l[1]=c=>S(null)),icon:f(W)},{default:t(()=>[d(" 新增房间 ")]),_:1},8,["icon"]),e(i,{type:"danger",onClick:l[2]||(l[2]=c=>b(null)),disabled:k.value,icon:f(R)},{default:t(()=>[d(" 批量删除 ")]),_:1},8,["disabled","icon"])]),X((p(),w(T,{data:o.pageData,border:"",stripe:"",class:"data-table",onSelectionChange:D},{default:t(()=>[e(u,{type:"selection",width:"55",align:"center"}),e(u,{prop:"hotelTitle",label:"所属酒店","min-width":"180","show-overflow-tooltip":""}),e(u,{prop:"roomTypeName",label:"所属房型","min-width":"150","show-overflow-tooltip":""}),e(u,{prop:"sn",label:"房间号","min-width":"120",align:"center"}),e(u,{prop:"status",label:"状态",width:"100",align:"center"},{default:t(c=>[c.row.status===0?(p(),w(x,{key:0,type:"success",effect:"light"},{default:t(()=>[d("空闲")]),_:1})):U("",!0),c.row.status===1?(p(),w(x,{key:1,type:"danger",effect:"light"},{default:t(()=>[d("入住")]),_:1})):U("",!0)]),_:1}),e(u,{prop:"createTime",label:"创建时间","min-width":"160",align:"center"}),e(u,{label:"操作",width:"150",fixed:"right",align:"center"},{default:t(c=>[e(i,{type:"primary",link:"",onClick:q=>S(c.row.id),icon:f(Y)},{default:t(()=>[d(" 编辑 ")]),_:2},1032,["onClick","icon"]),e(i,{type:"danger",link:"",onClick:q=>b(c.row.id),icon:f(R)},{default:t(()=>[d(" 删除 ")]),_:2},1032,["onClick","icon"])]),_:1})]),_:1},8,["data"])),[[r,o.loading]]),I("div",de,[e(N,{background:"",layout:"total, prev, pager, next, jumper","page-size":o.page.size,total:o.total,"current-page":o.page.current,onCurrentChange:m},null,8,["page-size","total","current-page"])])]),_:1}),e(ae,{ref_key:"editRef",ref:s,onHandleClose:B},null,512)])}}},pe=K(ie,[["__scopeId","data-v-db112d33"]]);export{pe as default};
