import{G as S,_ as z,C as E,a as F}from"./edit-b20499c4.js";import{C as H,r as I,E as $,e,w as o,d as r,o as s,h as u,a as p,l as i,L as k,K as C}from"./index-98ff7959.js";import"./room-d7507ce9.js";const R={__name:"checkIn",setup(D){const l=H({searchForm:{},pageData:[],page:{current:1,size:10},total:0}),c=()=>{S({status:2,...l.page,...l.searchForm}).then(t=>{l.pageData=t.data.records,l.total=t.data.total})};c();const b=t=>{l.page.current=t,c()},_=I(),y=t=>{_.value.init(t)},w=t=>{t&&c()},x=t=>{k.confirm("确认取消该订单吗？","警告",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then(()=>{E(t).then(m=>{C.success("取消成功"),c()})})},T=t=>{k.confirm("确认执行退房操作吗？","警告",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then(()=>{F(t).then(m=>{C.success("退房成功"),c()})})};return(t,m)=>{const v=r("el-input"),f=r("el-form-item"),d=r("el-button"),B=r("el-form"),a=r("el-table-column"),h=r("el-tag"),V=r("el-table"),N=r("el-pagination");return s(),$("div",null,[e(B,{"label-width":"auto",inline:!0},{default:o(()=>[e(f,null,{default:o(()=>[e(v,{modelValue:l.searchForm.sn,"onUpdate:modelValue":m[0]||(m[0]=n=>l.searchForm.sn=n),placeholder:"订单号"},null,8,["modelValue"])]),_:1}),e(f,null,{default:o(()=>[e(d,{onClick:c},{default:o(()=>[u("搜索")]),_:1})]),_:1})]),_:1}),e(V,{data:l.pageData,border:"",style:{width:"100%"},onSelectionChange:t.handleSelectionChange},{default:o(()=>[e(a,{type:"selection",width:"55"}),e(a,{prop:"sn",label:"订单编号"}),e(a,{prop:"hotelTitle",label:"酒店名称"}),e(a,{prop:"roomTypeName",label:"房型"}),e(a,{prop:"roomSn",label:"房间"}),e(a,{prop:"guestName",label:"入住人名字"}),e(a,{prop:"bookCheckInTime",label:"预订入住时间"}),e(a,{prop:"realCheckInTime",label:"实际入住时间"}),e(a,{prop:"realCheckOutTime",label:"实际退房时间"}),e(a,{prop:"price",label:"价格"}),e(a,{prop:"statusStr",label:"状态"},{default:o(n=>[n.row.status===0?(s(),p(h,{key:0},{default:o(()=>[u("正常")]),_:1})):i("",!0),n.row.status===1?(s(),p(h,{key:1,type:"danger"},{default:o(()=>[u("其他")]),_:1})):i("",!0)]),_:1}),e(a,{prop:"bookTime",label:"预订时间"}),e(a,{label:"操作"},{default:o(n=>[n.row.status===1?(s(),p(d,{key:0,type:"text",onClick:g=>x(n.row.id)},{default:o(()=>[u("取消")]),_:2},1032,["onClick"])):i("",!0),n.row.status===2?(s(),p(d,{key:1,type:"text",onClick:g=>y(n.row.id)},{default:o(()=>[u("入住")]),_:2},1032,["onClick"])):i("",!0),n.row.status===3?(s(),p(d,{key:2,type:"text",onClick:g=>T(n.row.id)},{default:o(()=>[u("退房")]),_:2},1032,["onClick"])):i("",!0)]),_:1})]),_:1},8,["data","onSelectionChange"]),e(N,{style:{"margin-top":"16px"},background:"",layout:"total, prev, pager, next","page-size":l.page.size,total:l.total,onCurrentChange:b},null,8,["page-size","total"]),e(z,{ref_key:"editRef",ref:_,onHandleClose:w},null,512)])}}};export{R as default};
