import{a as y}from"./user-14ed03fd.js";import{_ as k,C as f,r as w,E as B,f as e,g as C,a as E,w as r,d as c,O as I,o as g,e as a,i as _,V as m,h as S,A as U,B as q,K as N}from"./index-98ff7959.js";import"./user-194456a1.js";const P=n=>(U("data-v-e1e5b944"),n=n(),q(),n),D={class:"password-container"},R=P(()=>e("div",{class:"page-header"},[e("h2",{class:"page-title"},"修改密码"),e("p",{class:"page-desc"},"为了您的账户安全，请定期修改密码")],-1)),A={class:"password-card"},F={class:"form-section"},K=P(()=>e("div",{class:"password-tips"},[e("h4",null,"密码安全提示："),e("ul",null,[e("li",null,"密码长度至少6位，建议使用8位以上"),e("li",null,"建议使用字母、数字和特殊字符的组合"),e("li",null,"不要使用与其他网站相同的密码")])],-1)),M={__name:"updatePwd",setup(n){const s=f({oldPass:"",newPass:"",confirmPass:""}),v=f({oldPass:[{required:!0,message:"请输入旧密码",trigger:"blur"}],newPass:[{required:!0,message:"请输入新密码",trigger:"blur"},{min:6,message:"密码长度不能少于6个字符",trigger:"blur"}],confirmPass:[{required:!0,message:"请确认新密码",trigger:"blur"},{validator:(p,o,l)=>{o!==s.newPass?l(new Error("两次输入的密码不一致")):l()},trigger:"blur"}]}),d=w(!1),u=w(),b=()=>{u.value.validate(async p=>{if(p){d.value=!0;try{await y({oldPass:s.oldPass,newPass:s.newPass}),N.success("密码修改成功"),u.value.resetFields()}catch(o){console.error(o)}finally{d.value=!1}}})};return(p,o)=>{const l=c("el-input"),i=c("el-form-item"),h=c("el-button"),V=c("el-form"),x=I("loading");return g(),B("div",D,[R,e("div",A,[C((g(),E(V,{ref_key:"formRef",ref:u,model:s,rules:v,"label-position":"top",class:"password-form"},{default:r(()=>[e("div",F,[a(i,{label:"当前密码",prop:"oldPass"},{default:r(()=>[a(l,{modelValue:s.oldPass,"onUpdate:modelValue":o[0]||(o[0]=t=>s.oldPass=t),"show-password":"",placeholder:"请输入当前密码","prefix-icon":_(m)},null,8,["modelValue","prefix-icon"])]),_:1}),a(i,{label:"新密码",prop:"newPass"},{default:r(()=>[a(l,{modelValue:s.newPass,"onUpdate:modelValue":o[1]||(o[1]=t=>s.newPass=t),"show-password":"",placeholder:"请输入新密码，不少于6个字符","prefix-icon":_(m)},null,8,["modelValue","prefix-icon"])]),_:1}),a(i,{label:"确认新密码",prop:"confirmPass"},{default:r(()=>[a(l,{modelValue:s.confirmPass,"onUpdate:modelValue":o[2]||(o[2]=t=>s.confirmPass=t),"show-password":"",placeholder:"请再次输入新密码","prefix-icon":_(m)},null,8,["modelValue","prefix-icon"])]),_:1}),K,a(i,null,{default:r(()=>[a(h,{type:"primary",onClick:b,loading:d.value,class:"submit-btn"},{default:r(()=>[S(" 确认修改 ")]),_:1},8,["loading"])]),_:1})])]),_:1},8,["model","rules"])),[[x,d.value]])])])}}},z=k(M,[["__scopeId","data-v-e1e5b944"]]);export{z as default};
