import{_ as W,r as N,C as A,D as ee,E as m,e as a,w as l,f as e,z as n,a1 as M,l as te,b as oe,X as se,d as r,o as u,i as S,Z as ae,h as k,a2 as ie,M as w,N as y,a as Y,a3 as le,a4 as ne,a5 as re,a6 as ce,m as de,a7 as _e,a8 as ue,a9 as me,aa as he,ab as pe,ac as ge,K as fe,A as ve,B as be}from"./index-98ff7959.js";import{h as g}from"./moment-a9aaa855.js";import{D as ke}from"./hotel-505ab7d0.js";import{C as we}from"./order-b00400c5.js";import"./user-194456a1.js";const d=f=>(ve("data-v-97a95099"),f=f(),be(),f),ye={class:"container hotel-detail-container"},Ie={class:"hotel-header"},Ve=["src"],Ce={class:"hotel-info-card apple-card"},xe={class:"hotel-title"},Te={class:"hotel-meta"},Fe={class:"hotel-rating"},De={class:"hotel-rank"},Le={class:"hotel-info-list"},Ne={class:"info-item"},Me=d(()=>e("div",{class:"info-label"},"酒店电话",-1)),Se={class:"info-value"},Ye={class:"info-item"},qe=d(()=>e("div",{class:"info-label"},"酒店位置",-1)),Be={class:"info-value location"},Ee={class:"info-item"},Pe=d(()=>e("div",{class:"info-label"},"酒店简介",-1)),Re={class:"info-value description"},Oe={class:"hotel-gallery"},Ue={class:"gallery-container"},$e=["onClick"],ze=["src"],Ke={class:"hotel-services section-card"},Xe=d(()=>e("h2",{class:"section-title"},"服务与设施",-1)),Ze={class:"services-list"},je={class:"service-item"},Ge={class:"service-icon"},He={class:"hotel-room-types"},Je=d(()=>e("h2",{class:"section-title"},"可预订房型",-1)),Qe={class:"room-type-list"},We=["onClick"],Ae=["src"],et={class:"room-info"},tt={class:"room-title"},ot={class:"room-attributes"},st={class:"attribute-item"},at=d(()=>e("div",{class:"attribute-label"},"房间面积",-1)),it={class:"attribute-value"},lt={class:"attribute-item"},nt=d(()=>e("div",{class:"attribute-label"},"床型",-1)),rt={class:"attribute-value"},ct={class:"attribute-item"},dt=d(()=>e("div",{class:"attribute-label"},"宽带",-1)),_t={class:"attribute-value"},ut={class:"attribute-item"},mt=d(()=>e("div",{class:"attribute-label"},"早餐",-1)),ht={class:"attribute-value"},pt={class:"room-desc"},gt={class:"room-booking"},ft={class:"room-price"},vt={class:"price-value"},bt=d(()=>e("span",{class:"price-unit"},"/晚",-1)),kt={class:"room-stock"},wt={key:0,class:"custom-image-viewer"},yt={class:"viewer-container"},It={class:"viewer-header"},Vt={class:"viewer-counter"},Ct={class:"viewer-content"},xt={class:"viewer-image-container"},Tt=["src"],Ft={__name:"hotelDetail",setup(f){const q=N([{icon:ne,title:"行李寄存"},{icon:re,title:"停车场"},{icon:ce,title:"洗衣服务"},{icon:de,title:"大堂吧"},{icon:_e,title:"叫车服务"},{icon:ue,title:"24小时前台"},{icon:me,title:"快速入住退房"},{icon:he,title:"快递服务"},{icon:pe,title:"急救包"},{icon:ge,title:"灭火器"}]),p=oe(),B=se(),E=p.params.hotelId,t=A({hotel:{},roomTypes:[],loading:!0,orderVisible:!1,checkTime:[p.query.checkInTime,p.query.checkOutTime],orderForm:{roomTypeId:"",bookCheckInTime:p.query.checkInTime||"",bookCheckOutTime:p.query.checkOutTime||"",guestName:"",guestPhone:""},rangeSeparator:"1晚",activeImageIndex:0,imageList:[],showImageViewer:!1,currentViewerIndex:0}),P=()=>{t.loading=!0,ke(E).then(s=>{t.hotel=s.data.hotel,t.roomTypes=s.data.roomTypes,t.hotel.images?t.imageList=t.hotel.images.split(";").filter(o=>o&&o.trim()!==""):t.imageList=[],t.imageList.length>0&&V(t.imageList),t.roomTypes&&t.roomTypes.length>0&&t.roomTypes.forEach(o=>{if(o.image&&I(o.image),o.images){const c=o.images.split(";").filter(_=>_&&_.trim()!=="");V(c)}}),t.loading=!1})},I=s=>{if(!s)return;const o=new Image;o.src=s},V=s=>{!s||!s.length||s.forEach(o=>I(o))},R=s=>{t.orderVisible=!0,t.orderForm.roomTypeId=s},O=s=>s<g().subtract(1,"d"),U=s=>{const o=g(s[1]).diff(g(s[0]),"day");t.rangeSeparator=o+"晚",t.orderForm.bookCheckInTime=g(s[0]).format("YYYY-MM-DD"),t.orderForm.bookCheckOutTime=g(s[1]).format("YYYY-MM-DD")},C=N(),$=()=>{C.value.validate(s=>{s&&we(t.orderForm).then(o=>{fe.success("预订成功"),B.push("/order-detail/"+o.data)})})},x=s=>{t.currentViewerIndex=s,t.showImageViewer=!0},T=()=>{t.showImageViewer=!1},z=()=>{t.currentViewerIndex>0?t.currentViewerIndex--:t.currentViewerIndex=t.imageList.length-1},K=()=>{t.currentViewerIndex<t.imageList.length-1?t.currentViewerIndex++:t.currentViewerIndex=0},X=(s,o=0)=>{const c=s.images?s.images.split(";").filter(_=>_&&_.trim()!==""):[s.image];c.length>0&&(t.imageList=c,t.currentViewerIndex=o,t.showImageViewer=!0)};return ee(()=>{P()}),(s,o)=>{const c=r("el-col"),_=r("el-icon"),Z=r("el-tag"),j=r("el-scrollbar"),b=r("el-row"),F=r("el-button"),G=r("el-skeleton"),H=r("el-date-picker"),v=r("el-form-item"),D=r("el-input"),J=r("el-form"),Q=r("el-dialog");return u(),m("div",ye,[a(G,{loading:t.loading,animated:""},{default:l(()=>[e("div",Ie,[a(b,{gutter:30},{default:l(()=>[a(c,{lg:10,md:12,sm:24},{default:l(()=>[e("div",{class:"hotel-main-image apple-card",onClick:o[0]||(o[0]=i=>x(0))},[e("img",{src:t.hotel.image,alt:"酒店主图",class:"main-hotel-img"},null,8,Ve)])]),_:1}),a(c,{lg:14,md:12,sm:24},{default:l(()=>[e("div",Ce,[e("h1",xe,n(t.hotel.title),1),e("div",Te,[e("div",Fe,[a(_,{color:"#ff9500"},{default:l(()=>[a(S(ae))]),_:1}),e("span",null,n(t.hotel.score)+" 分",1)]),e("div",De,[a(Z,{type:"warning",effect:"light"},{default:l(()=>[k(n(t.hotel.rankStr),1)]),_:1})])]),e("div",Le,[e("div",Ne,[Me,e("div",Se,n(t.hotel.tel),1)]),e("div",Ye,[qe,e("div",Be,[a(_,{color:"var(--primary-color)"},{default:l(()=>[a(S(ie))]),_:1}),e("span",null,n(t.hotel.location),1)])]),e("div",Ee,[Pe,e("div",Re,n(t.hotel.introduction),1)])]),e("div",Oe,[a(j,null,{default:l(()=>[e("div",Ue,[(u(!0),m(w,null,y(t.imageList,(i,h)=>(u(),m("div",{key:h,class:"gallery-item",onClick:L=>x(h)},[e("img",{src:i,alt:"酒店图片",class:"gallery-img"},null,8,ze)],8,$e))),128))])]),_:1})])])]),_:1})]),_:1})]),e("div",Ke,[Xe,e("div",Ze,[a(b,{gutter:20},{default:l(()=>[(u(!0),m(w,null,y(q.value,(i,h)=>(u(),Y(c,{xs:12,sm:8,md:6,lg:4,key:h},{default:l(()=>[e("div",je,[e("div",Ge,[a(_,{size:24,color:"var(--primary-color)"},{default:l(()=>[(u(),Y(le(i.icon)))]),_:2},1024)]),e("span",null,n(i.title),1)])]),_:2},1024))),128))]),_:1})])]),e("div",He,[Je,e("div",Qe,[(u(!0),m(w,null,y(t.roomTypes,(i,h)=>(u(),m("div",{class:"room-type-card apple-card",key:h},[a(b,{gutter:24},{default:l(()=>[a(c,{md:6,sm:8,xs:24},{default:l(()=>[e("div",{class:"room-image",onClick:L=>X(i)},[e("img",{src:i.image,alt:"房型图片",class:"room-img"},null,8,Ae)],8,We)]),_:2},1024),a(c,{md:12,sm:16,xs:24},{default:l(()=>[e("div",et,[e("h3",tt,n(i.title),1),e("div",ot,[e("div",st,[at,e("div",it,n(i.area)+"㎡",1)]),e("div",lt,[nt,e("div",rt,n(i.bedType),1)]),e("div",ct,[dt,e("div",_t,n(i.internet),1)]),e("div",ut,[mt,e("div",ht,n(i.breakfast),1)])]),e("div",pt,n(i.remark),1)])]),_:2},1024),a(c,{md:6,xs:24},{default:l(()=>[e("div",gt,[e("div",ft,[e("span",vt,"¥"+n(i.price),1),bt]),e("div",kt,"剩余"+n(i.stock)+"间",1),a(F,{type:"primary",class:"book-button",onClick:L=>R(i.id)},{default:l(()=>[k("立即预订")]),_:2},1032,["onClick"])])]),_:2},1024)]),_:2},1024)]))),128))])])]),_:1},8,["loading"]),a(Q,{modelValue:t.orderVisible,"onUpdate:modelValue":o[4]||(o[4]=i=>t.orderVisible=i),title:"酒店预订",width:"500px",class:"booking-dialog"},{default:l(()=>[a(J,{ref_key:"formRef",ref:C,model:t.orderForm,"label-position":"top",rules:{guestName:[{required:!0,message:"请输入入住人姓名",trigger:"blur"}],guestPhone:[{required:!0,message:"请输入联系电话",trigger:"blur"}]}},{default:l(()=>[a(v,{label:"入住日期",required:""},{default:l(()=>[a(H,{modelValue:t.checkTime,"onUpdate:modelValue":o[1]||(o[1]=i=>t.checkTime=i),type:"daterange","disabled-date":O,"range-separator":t.rangeSeparator,"start-placeholder":"入住日期","end-placeholder":"退房日期",onChange:U,style:{width:"100%"}},null,8,["modelValue","range-separator"])]),_:1}),a(v,{label:"入住人",prop:"guestName"},{default:l(()=>[a(D,{modelValue:t.orderForm.guestName,"onUpdate:modelValue":o[2]||(o[2]=i=>t.orderForm.guestName=i),placeholder:"请输入入住人姓名"},null,8,["modelValue"])]),_:1}),a(v,{label:"联系电话",prop:"guestPhone"},{default:l(()=>[a(D,{modelValue:t.orderForm.guestPhone,"onUpdate:modelValue":o[3]||(o[3]=i=>t.orderForm.guestPhone=i),placeholder:"请输入联系电话"},null,8,["modelValue"])]),_:1}),a(v,null,{default:l(()=>[a(F,{type:"primary",onClick:$,style:{width:"100%"}},{default:l(()=>[k("确认预订")]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),t.showImageViewer?(u(),m("div",wt,[e("div",{class:"viewer-overlay",onClick:T}),e("div",yt,[e("div",It,[e("span",Vt,n(t.currentViewerIndex+1)+"/"+n(t.imageList.length),1),e("button",{class:"viewer-close-btn",onClick:T},"×")]),e("div",Ct,[e("button",{class:"viewer-nav-btn prev-btn",onClick:M(z,["stop"])},"❮"),e("div",xt,[e("img",{src:t.imageList[t.currentViewerIndex],alt:"查看大图",class:"viewer-image"},null,8,Tt)]),e("button",{class:"viewer-nav-btn next-btn",onClick:M(K,["stop"])},"❯")])])])):te("",!0)])}}},Yt=W(Ft,[["__scopeId","data-v-97a95099"]]);export{Yt as default};
