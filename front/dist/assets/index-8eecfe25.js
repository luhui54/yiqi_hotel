import{G as N,_ as S,C as z,a as E}from"./edit-b20499c4.js";import{C as F,r as H,E as $,e,w as n,d as r,o as p,h as u,a as m,l as d,L as C,K as g}from"./index-98ff7959.js";import"./room-d7507ce9.js";const M={__name:"index",setup(D){const o=F({searchForm:{},pageData:[],page:{current:1,size:10},total:0}),c=()=>{N({...o.page,...o.searchForm}).then(t=>{o.pageData=t.data.records,o.total=t.data.total})};c();const b=t=>{o.page.current=t,c()},_=H(),k=t=>{_.value.init(t)},x=t=>{t&&c()},y=t=>{C.confirm("确认取消该订单吗？","警告",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then(()=>{z(t).then(s=>{g.success("取消成功"),c()})})},w=t=>{C.confirm("确认执行退房操作吗？","警告",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then(()=>{E(t).then(s=>{g.success("退房成功"),c()})})};return(t,s)=>{const T=r("el-input"),h=r("el-form-item"),i=r("el-button"),v=r("el-form"),a=r("el-table-column"),B=r("el-table"),V=r("el-pagination");return p(),$("div",null,[e(v,{"label-width":"auto",inline:!0},{default:n(()=>[e(h,null,{default:n(()=>[e(T,{modelValue:o.searchForm.sn,"onUpdate:modelValue":s[0]||(s[0]=l=>o.searchForm.sn=l),placeholder:"订单号"},null,8,["modelValue"])]),_:1}),e(h,null,{default:n(()=>[e(i,{onClick:c},{default:n(()=>[u("搜索")]),_:1})]),_:1})]),_:1}),e(B,{data:o.pageData,border:"",style:{width:"100%"},onSelectionChange:t.handleSelectionChange},{default:n(()=>[e(a,{type:"selection",width:"55"}),e(a,{prop:"sn",label:"订单编号"}),e(a,{prop:"hotelTitle",label:"酒店名称"}),e(a,{prop:"roomTypeName",label:"房型"}),e(a,{prop:"roomSn",label:"房间"}),e(a,{prop:"guestName",label:"入住人名字"}),e(a,{prop:"bookCheckInTime",label:"预订入住时间"}),e(a,{prop:"realCheckInTime",label:"实际入住时间"}),e(a,{prop:"realCheckOutTime",label:"实际退房时间"}),e(a,{prop:"price",label:"价格"}),e(a,{prop:"statusStr",label:"状态"}),e(a,{prop:"bookTime",label:"预订时间"}),e(a,{label:"操作"},{default:n(l=>[l.row.status===1?(p(),m(i,{key:0,type:"text",onClick:f=>y(l.row.id)},{default:n(()=>[u("取消")]),_:2},1032,["onClick"])):d("",!0),l.row.status===2?(p(),m(i,{key:1,type:"text",onClick:f=>k(l.row.id)},{default:n(()=>[u("入住")]),_:2},1032,["onClick"])):d("",!0),l.row.status===3?(p(),m(i,{key:2,type:"text",onClick:f=>w(l.row.id)},{default:n(()=>[u("退房")]),_:2},1032,["onClick"])):d("",!0)]),_:1})]),_:1},8,["data","onSelectionChange"]),e(V,{style:{"margin-top":"16px"},background:"",layout:"total, prev, pager, next","page-size":o.page.size,total:o.total,onCurrentChange:b},null,8,["page-size","total"]),e(S,{ref_key:"editRef",ref:_,onHandleClose:x},null,512)])}}};export{M as default};
