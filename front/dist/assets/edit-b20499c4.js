import{J as m,r as p,C as x,d as s,o as f,a as V,w as t,e as a,E as O,M as P,N as G,h as k,K as B}from"./index-98ff7959.js";import{G as E}from"./room-d7507ce9.js";function z(u){return m({url:"/admin/order/page",method:"get",params:u})}function F(u){return m({url:"/admin/order/info/"+u,method:"get"})}function H(u){return m({url:"/admin/order/checkIn",method:"post",data:u})}function D(u){return m({url:"/admin/order/checkOut",method:"post",params:{id:u}})}function J(u){return m({url:"/admin/order/cancel",method:"post",params:{id:u}})}const K={__name:"edit",emits:["handleClose"],setup(u,{expose:C,emit:g}){const i=p(!1),c=p([]),o=p({});C({init:d=>{i.value=!0,E({size:100}).then(e=>{c.value=e.data.records}),d?F(d).then(e=>{o.value=e.data}):o.value={}}});const h=x({roomId:[{required:!0,message:"此项是必填项",trigger:"blur"}]}),I=g,v=d=>{i.value=!1,I("handleClose",d)},_=p(),T=()=>{_.value.validate((d,e)=>{d&&H(o.value).then(r=>{B.success("入住成功"),v(!0)})})};return(d,e)=>{const r=s("el-input"),n=s("el-form-item"),N=s("el-option"),w=s("el-select"),b=s("el-button"),y=s("el-form"),U=s("el-drawer");return f(),V(U,{modelValue:i.value,"onUpdate:modelValue":e[7]||(e[7]=l=>i.value=l),title:"入住安排"},{default:t(()=>[a(y,{ref_key:"formRef",ref:_,style:{"max-width":"600px"},model:o.value,rules:h,"label-width":"auto"},{default:t(()=>[a(n,{label:"订单编号",prop:"sn"},{default:t(()=>[a(r,{modelValue:o.value.sn,"onUpdate:modelValue":e[0]||(e[0]=l=>o.value.sn=l),disabled:""},null,8,["modelValue"])]),_:1}),a(n,{label:"房间类型",prop:"roomTypeName"},{default:t(()=>[a(r,{modelValue:o.value.roomTypeName,"onUpdate:modelValue":e[1]||(e[1]=l=>o.value.roomTypeName=l),disabled:""},null,8,["modelValue"])]),_:1}),a(n,{label:"入住人名字",prop:"guestName"},{default:t(()=>[a(r,{modelValue:o.value.guestName,"onUpdate:modelValue":e[2]||(e[2]=l=>o.value.guestName=l),disabled:""},null,8,["modelValue"])]),_:1}),a(n,{label:"入住人手机号",prop:"guestPhone"},{default:t(()=>[a(r,{modelValue:o.value.guestPhone,"onUpdate:modelValue":e[3]||(e[3]=l=>o.value.guestPhone=l),disabled:""},null,8,["modelValue"])]),_:1}),a(n,{label:"预订入住时间",prop:"bookCheckInTime"},{default:t(()=>[a(r,{modelValue:o.value.bookCheckInTime,"onUpdate:modelValue":e[4]||(e[4]=l=>o.value.bookCheckInTime=l),disabled:""},null,8,["modelValue"])]),_:1}),a(n,{label:"预订退房时间",prop:"bookCheckOutTime"},{default:t(()=>[a(r,{modelValue:o.value.bookCheckOutTime,"onUpdate:modelValue":e[5]||(e[5]=l=>o.value.bookCheckOutTime=l),disabled:""},null,8,["modelValue"])]),_:1}),a(n,{label:"房间安排",prop:"roomId"},{default:t(()=>[a(w,{modelValue:o.value.roomId,"onUpdate:modelValue":e[6]||(e[6]=l=>o.value.roomId=l),placeholder:"请选择房间"},{default:t(()=>[(f(!0),O(P,null,G(c.value,l=>(f(),V(N,{disabled:l.status===1,key:l.id,label:l.sn,value:l.id},null,8,["disabled","label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(n,null,{default:t(()=>[a(b,{type:"primary",onClick:T},{default:t(()=>[k("提交")]),_:1}),a(b,{onClick:v},{default:t(()=>[k("关闭")]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"])}}};export{J as C,z as G,K as _,D as a};
